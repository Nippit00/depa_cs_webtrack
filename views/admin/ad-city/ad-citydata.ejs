<!DOCTYPE html>
<html lang="en">
  <head>
    <% include('../include/ad-head.ejs') %>
    <title>Admin - <%= pageTitle %></title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Thai:wght@100;300;400;500;700;900&display=swap" rel="stylesheet">
<style>
  * {
    font-family: "Noto Sans Thai", sans-serif;
    font-weight: 400; /* จะใช้รูปแบบตัวหนาเมื่อต้องการ */
    font-style: normal;
  }
</style>

  </head>
  <body class="bg-teal-500">
    <%- include('../include/ad-navbar.ejs') %>
    <div class="w-[90%] mx-auto bg-white mt-3 rounded-lg">
      <div class="flex mx-20 py-5">
        <div class="w-[50%]">
          <div>
            <p class="text-3xl font-medium">
              ข้อมูลจังหวัด <%=cityData.cityName %>
            </p>
          </div>
          <div>
            <p class="text-xl font-normal">จังหวัด : <%=cityData.province %></p>
          </div>
          <div>
            <p class="text-xl font-normal">
              ผู้พัฒนา : <%=cityData.developer %>
            </p>
          </div>
          <div>
            <p class="text-xl font-normal">
              ผู้บริหาร : <%=cityData.executive %>
            </p>
          </div>
         
              <% if (cityData.government_investment === 0) { %>
                
              <% } else { %>
                <div>
                  <p class="text-xl font-normal">
                ลงทุนโดยรัฐบาล : <%= cityData.government_investment.toLocaleString() %> บาท
              </p>
            </div>
              <% } %>
              
           
              <% if (cityData.private_investment === 0) { %>
                
                <% } else { %>
                  <div>
                    <p class="text-xl font-normal">
                  ลงทุนโดยเอกชน : <%= cityData.private_investment.toLocaleString() %> บาท
                </p>
              </div>
                <% } %>
        </div>
        <div class="w-[50%] item-center justify-items-center justify-center">
          <iframe
            width="600"
            height="450"
            frameborder="0"
            style="border: 0"
            src="https://www.google.com/maps/embed/v1/place?key=AIzaSyB_QQj5dFvATApuqEbGEt1i__KatMvU80o&q=<%=cityData.LAT%>,<%=cityData.LNG%>%>&zoom=5&maptype=satellite"
            allowfullscreen=""
          ></iframe>
        </div>
      </div>
      <div class="lg:w-1/2 flex justify-center items-center">
        <iframe
          class="w-full h-64 lg:h-96"
          frameborder="0"
          style="border: 0"
          src="https://www.google.com/maps/embed/v1/place?key=AIzaSyB_QQj5dFvATApuqEbGEt1i__KatMvU80o&q=<%=cityData.LAT%>,<%=cityData.LNG%>&zoom=5&maptype=satellite"
          allowfullscreen=""
        ></iframe>
      </div>
    </div>
    <div class="mt-6">
      <table class="min-w-full divide-y divide-gray-200">
        <thead class="bg-yellow-300 rounded-xl">
          <tr>
            <th class="px-4 py-2 text-left text-sm font-medium text-gray-900">โครงสร้าง / Smart</th>
            <th class="px-4 py-2 text-left text-sm font-medium text-gray-900">Project</th>
            <th class="px-4 py-2 text-left text-sm font-medium text-gray-900">Actions</th>
          </tr>
        </thead>
        <tbody class="bg-white divide-y divide-gray-200">
          <% solution.forEach((smartItem, index) => { %>
            <% if (index !== 0) { %>
              <tr class="hover:bg-gray-50">
                <td class="px-4 py-2">
                  <%= smartItem.smart === 'City Data Platform' ? smartItem.smart : 'smart ' + smartItem.smart %>
                </td>
                <td class="px-4 py-2">
                  <a href="" class="text-blue-500 h/admin/kpi/<%=smartItem.solutionID%>ne"><%= smartItem.solutionName %></a>
                </td>
                <td class="px-4 py-2">
                  <div class="flex space-x-2">
                    <a href="/admin/kpi/<%=smartItem.solutionID%>" class="bg-green-400 px-4 py-2 rounded hover:bg-yellow-500">แก้ไข KPI</a>
                    <a href="/admin/solution/edit/<%=smartItem.solutionID %>" class="bg-yellow-300 px-4 py-2 rounded hover:bg-yellow-500">แก้ไข Solution</a>
                    <a href="/admin/solution/delete/<%=smartItem.solutionID %>/<%=smartItem.cityID %>" class="bg-red-600 text-white px-4 py-2 rounded hover:bg-red-500">ลบ</a>
                  </div>
                </td>
              </tr>
            <% } %>
          <% }); %>
        </tbody>
      </table>
    </div>
  </div>
  <%- include('../include/ad-footer.ejs') %>
  <script>
    function GoEditPage() {
      const cityID = "<%= cityData.cityID %>";
      window.location.href = `/admin/city/edit/${cityID}`;
      console.log("active");
    }
    function GoAddSolution() {
      const cityID = "<%= cityData.cityID %>";
      window.location.href = `/admin/solution/add/${cityID}`;
      console.log("active");
    }
  </script>
  <script>
    function handleSearch() {
      const searchText = document.getElementById("searchInput").value.toLowerCase();
      const rows = document.querySelectorAll("table tbody tr");
      rows.forEach((row) => {
        const cells = row.querySelectorAll("td");
        let found = false;
        cells.forEach((cell) => {
          if (cell.textContent.toLowerCase().includes(searchText)) {
            found = true;
          }
        });
        row.style.display = found ? "" : "none";
      });
    }
    document.getElementById("searchInput").addEventListener("keyup", function () {
      handleSearch();
    });
  </script>
</body>
</html>
